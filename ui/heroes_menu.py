# ui.heroes_menu.py
from ui.ui_utils import print_header, press_enter_to_continue

def heroes_menu(game_state):
    """–ú–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–µ—Ä–æ—è–º–∏"""
    
    # –î–û–ë–ê–í–ò–¢–¨: –û—á–∏—Å—Ç–∫–∞ –≥—Ä—É–ø–ø –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –º–µ–Ω—é –≥–µ—Ä–æ–µ–≤
    from systems.party_system import PartySystem
    PartySystem(game_state).cleanup_dead_heroes()

    while True:
        print_header("üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ—Ä–æ—è–º–∏")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏
        role_available = 'role_system' in game_state and game_state['role_system'] is not None
        role_icon = "üëë" if role_available else "üîí"

        print("1. ‚öîÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–µ–≤—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏")
        print("2. üë• –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ—Ö –≥–µ—Ä–æ–µ–≤")
        print(f"3. {role_icon} –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –≥–µ—Ä–æ–µ–≤")
        print("0. ‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ª–æ–±–±–∏")
        print()

        try:
            choice = int(input("–í–∞—à –≤—ã–±–æ—Ä: "))
        except ValueError:
            press_enter_to_continue()
            continue

        if choice == 0:
            break
        elif choice == 1:
            from ui.party_editor import manage_parties
            manage_parties(game_state)
        elif choice == 2:
            from ui.party_manager import view_party
            view_party(game_state)
        elif choice == 3:
            from ui.role_manager import manage_roles
            manage_roles(game_state)
        else:
            print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä!")
            press_enter_to_continue()